{% extends 'base.html' %}
{% load static %}
{% block content %}

<div class="relative min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-blue-100 overflow-hidden">

  <!-- Background Blobs -->
  <div class="absolute top-[-150px] left-[-150px] w-[400px] h-[400px] bg-blue-200 rounded-full opacity-30 blur-3xl animate-pulse"></div>
  <div class="absolute bottom-[-150px] right-[-150px] w-[400px] h-[400px] bg-pink-200 rounded-full opacity-30 blur-3xl animate-pulse"></div>

  <!-- Login Card -->
  <div class="relative bg-white bg-opacity-90 backdrop-blur-xl shadow-2xl rounded-3xl w-full max-w-md p-10">
    <h2 class="text-center text-3xl font-extrabold text-gray-900 mb-8">
      Login to your account
    </h2>

    <form id="loginForm" class="space-y-6" action="{% url 'login' %}" method="POST" novalidate>
      {% csrf_token %}

      <!-- Username / Email -->
      <div class="relative">
        <input id="username" name="username" type="text" autocomplete="username" required
               class="peer w-full px-3 pt-5 pb-2 border border-gray-300 rounded-2xl shadow-sm placeholder-transparent focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 sm:text-sm transition-all"
               placeholder="Username or Email">
        <label for="username" class="absolute left-3 top-2 text-gray-400 text-sm transition-all peer-placeholder-shown:top-5 peer-placeholder-shown:text-gray-500 peer-placeholder-shown:text-base peer-focus:top-2 peer-focus:text-gray-700 peer-focus:text-sm">Username or Email</label>
        <p id="usernameError" class="mt-1 text-sm text-red-600 transition-opacity opacity-0"></p>
      </div>

      <!-- Password -->
      <div class="relative">
        <input id="password" name="password" type="password" autocomplete="current-password" required
               class="peer w-full px-3 pt-5 pb-2 border border-gray-300 rounded-2xl shadow-sm placeholder-transparent focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 sm:text-sm transition-all"
               placeholder="Password">
        <label for="password" class="absolute left-3 top-2 text-gray-400 text-sm transition-all peer-placeholder-shown:top-5 peer-placeholder-shown:text-gray-500 peer-placeholder-shown:text-base peer-focus:top-2 peer-focus:text-gray-700 peer-focus:text-sm">Password</label>
        <button type="button" class="absolute right-3 top-3 text-gray-500 font-medium text-sm toggle-password" data-target="password">
          <i class="fas fa-eye"></i>
        </button>
        <p id="passwordError" class="mt-1 text-sm text-red-600 transition-opacity opacity-0"></p>
      </div>

      <!-- Remember & Forgot -->
      <div class="flex items-center justify-between">
        <div class="flex items-center">
          <input id="remember-me" name="remember-me" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-400 border-gray-300 rounded transition-all">
          <label for="remember-me" class="ml-2 block text-sm text-gray-900">
            Remember me
          </label>
        </div>
        <div class="text-sm">
          <a href="#" class="font-medium text-blue-600 hover:text-blue-500">
            Forgot your password?
          </a>
        </div>
      </div>

      <!-- Submit -->
      <div>
        <button type="submit" class="w-full flex justify-center py-2 px-4 rounded-2xl shadow-lg text-white font-semibold text-sm bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 transform hover:scale-105 transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400">
          Sign in
        </button>
      </div>
    </form>

    <!-- Divider -->
    <div class="mt-6 relative">
      <div class="absolute inset-0 flex items-center">
        <div class="w-full border-t border-gray-300"></div>
      </div>
      <div class="relative flex justify-center text-sm">
        <span class="px-2 bg-white text-gray-500">
          Or continue with
        </span>
      </div>
    </div>

<!-- Social Signins -->
    <div class="mt-6 grid grid-cols-3 gap-3">
      <div>
        <a href="#" class="w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-2xl shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-blue-50 transition-all transform hover:scale-105">
          <i class="fab fa-facebook-f text-blue-600"></i>
        </a>
      </div>
      <div>
        <a href="#" class="w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-2xl shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-blue-50 transition-all transform hover:scale-105">
          <i class="fab fa-twitter text-blue-400"></i>
        </a>
      </div>
      <div>
        <a href="#" class="w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-2xl shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 transition-all transform hover:scale-105">
          <i class="fab fa-github text-gray-800"></i>
        </a>
      </div>
    </div>

    <!-- Sign up link -->
    <div class="mt-6 text-center">
      <p class="text-sm text-gray-600">
        Don't have an account?
        <a href="/signup" class="font-medium text-blue-600 hover:text-blue-500">Sign up</a>
      </p>
    </div>
  </div>
</div>

<script>
  // Password toggle
  document.querySelectorAll('.toggle-password').forEach(btn => {
    btn.addEventListener('click', () => {
      const targetId = btn.getAttribute('data-target');
      const input = document.getElementById(targetId);
      if (input.type === 'password') {
        input.type = 'text';
        btn.innerHTML = '<i class="fas fa-eye-slash"></i>';
      } else {
        input.type = 'password';
        btn.innerHTML = '<i class="fas fa-eye"></i>';
      }
    });
  });

  // Inline validation
  document.getElementById('loginForm').addEventListener('submit', function(e) {
    let valid = true;
    ['username','password'].forEach(id=>{
      const el = document.getElementById(id+'Error');
      if(el){ el.textContent=''; el.style.opacity='0'; }
    });

    const username = document.getElementById('username').value.trim();
    if(!username){ document.getElementById('usernameError').textContent='Username or Email is required'; document.getElementById('usernameError').style.opacity='1'; valid=false; }

    const password = document.getElementById('password').value;
    if(!password){ document.getElementById('passwordError').textContent='Password is required'; document.getElementById('passwordError').style.opacity='1'; valid=false; }

    if(!valid) e.preventDefault();
  });
</script>

{% endblock %}