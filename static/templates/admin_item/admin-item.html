{% extends 'base-admin.html' %} 
{% load static %} 
{% block content_admin %}
<head>
     <link rel="stylesheet" href="{% static 'css/admin_user.css' %}" />
</head>
<body>
    <div class="container">
        <div class="dashboard-header">
            <div class="dashboard-title">
                <h1>Admin Dashboard</h1>
                <p>SkillNet management and analytics</p>
            </div>
            <button class="export-btn">
                <i class="fas fa-file-export"></i> Export Data
            </button>
        </div>
        
        <div class="stats-container">
            <div class="stat-card">
                <p class="stat-title">Total users</p>
                 <div class="stat-value">
          {{ total_users }} <span class="icon icon-user">ðŸ‘¤</span>
        </div>
                <div class="stat-change"><i class="fas fa-arrow-up"></i> +12.3%</div>
            </div>
            
            <div class="stat-card">
                <p class="stat-title">Active jobs</p>
                <div class="stat-value">
                {{ total_active_jobs }} <span class="icon icon-job">ðŸ’¼</span>
                </div>
                <div class="stat-change"><i class="fas fa-arrow-up"></i> +22.9%</div>
            </div>
            
            <div class="stat-card">
                <p class="stat-title">Total courses</p>
               <div class="stat-value">
         {{ total_courses }} <span class="icon icon-course">ðŸ“š</span>
        </div>
                <div class="stat-change"><i class="fas fa-arrow-up"></i> +17.5%</div>
            </div>
            
            <div class="stat-card">
                <p class="stat-title">Total revenue</p>
                <p class="stat-value">178k <i class="fas fa-dollar-sign"></i></p>
                <div class="stat-change"><i class="fas fa-arrow-up"></i> +35.8%</div>
            </div>
            
            <div class="stat-card">
                <p class="stat-title">Conversation rate</p>
                <p class="stat-value">12.4% <i class="fas fa-chart-line"></i></p>
                <div class="stat-change"><i class="fas fa-arrow-up"></i> +12.3%</div>
            </div>
            
            <div class="stat-card">
                <p class="stat-title">Avg rating</p>
                <p class="stat-value">4.8 <i class="fas fa-star"></i></p>
                <div class="stat-change"><i class="fas fa-arrow-up"></i> +0.3%</div>
            </div>
        </div>
        
        <div class="nav-tabs">
            <div class="nav-tab active"> <a href='/admin_dashboard'>Overview</a></div>
            <div class="nav-tab"> Users</div>
            <div class="nav-tab">Content</div>
            <div class="nav-tab">Support</div>
            <div class="nav-tab">Analytics</div>
            <div class="nav-tab">Settings</div>
        </div>
        
        <div class="user-management">
            <div class="user-management-header">
                <h3>User Management :</h3>
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="Search user...">
                    <select class="filter-dropdown">
                        <option>All</option>
                        <option>Active</option>
                        <option>Inactive</option>
                        <option>Candidates</option>
                        <option>Employers</option>
                    </select>
                </div>
            </div>
            
            <table class="user-table">
                <thead>
                    <tr class="table-header">
                        <th>User</th>
                        <th>Type</th>
                        <th>Join date</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
  {% for u in recent_users %}
  <tr class="table-row">
    <!-- User Info -->
    <td class="table-cell">
      <div class="user-info">
        <div class="user-avatar">
          {% if u.profile_photo %}
            <img src="{{ u.profile_photo.url }}" alt="{{ u.user.username }}" class="avatar-img">
          {% else %}
            <i class="fas fa-user"></i>
          {% endif %}
        </div>
        <div>
          <div class="user-name">{{ u.user.username }}</div>
          <div class="user-email">{{ u.user.email }}</div>
        </div>
      </div>
    </td>

    <!-- Role -->
    <td class="table-cell">{{ u.get_user_type_display }}</td>

    <!-- Date Joined -->
    <td class="table-cell">{{ u.created_at|date:"d-m-Y" }}</td>

    <!-- Status -->
    <td class="table-cell">
      {% if u.user.is_active %}
        <span class="status-badge active" data-status="active">Active</span>
      {% else %}
        <span class="status-badge inactive" data-status="inactive">Inactive</span>
      {% endif %}
    </td>

    <!-- Actions -->
    <td class="table-cell">
      <div class="action-buttons">
        <div class="action-btn" title="Delete User">
          <i class="fas fa-trash-alt"></i>
        </div>
        <div class="action-btn" title="View Profile">
          <i class="fas fa-eye"></i>
        </div>
      </div>
    </td>
  </tr>
  {% empty %}
  <tr>
    <td colspan="5" class="text-center text-gray-500 py-4">
      No recent users found.
    </td>
  </tr>
  {% endfor %}
</tbody>

            </table>
        </div>
    </div>

    <script>
        // Toggle status function
        document.querySelectorAll('.status-badge').forEach(badge => {
            badge.addEventListener('click', function() {
                const currentStatus = this.getAttribute('data-status');
                
                if (currentStatus === 'active') {
                    this.textContent = 'inactive';
                    this.classList.remove('active');
                    this.classList.add('inactive');
                    this.setAttribute('data-status', 'inactive');
                } else {
                    this.textContent = 'active';
                    this.classList.remove('inactive');
                    this.classList.add('active');
                    this.setAttribute('data-status', 'active');
                }
            });
        });
        
        // Tab navigation
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
            });
        });
        
        // Export button effect
        document.querySelector('.export-btn').addEventListener('click', function() {
            this.innerHTML = '<i class="fas fa-check"></i> Exported!';
            setTimeout(() => {
                this.innerHTML = '<i class="fas fa-file-export"></i> Export Data';
            }, 2000);
        });
    </script>
</body>
{% endblock %}